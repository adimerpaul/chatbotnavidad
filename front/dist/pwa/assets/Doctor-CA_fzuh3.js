import{_ as x,c as u,o as m,w as t,a as e,W as g,d as f,Z as b,f as d,a7 as n,h as V,Q as D,e as p,b as i,t as Q}from"./index-BauECx7o.js";import{e as H,Q as v,a as c,c as _}from"./format-g9Qr7zkK.js";import{Q as G,C as y}from"./ClosePopup-D8gtAGJo.js";import{Q as C,a as k}from"./QTable-BirSJN0S.js";import{Q as w}from"./QForm-DVH7vej5.js";import{Q as q}from"./QSpace-r0MaWTcZ.js";import{Q as E}from"./QPage-BXv6I5md.js";import"./selection-R2GtEYNB.js";import"./use-fullscreen-CjAxtF11.js";const N={data(){return{doctores:[],doctor:{},horario:{available_from:"",available_to:"",days:"",price:""},dialogDoctor:!1,dialogHorarios:!1,loading:!1,filter:"",columns:[{name:"actions",label:"Acciones",align:"center"},{name:"name",label:"Nombre",field:"name",align:"left"},{name:"specialty",label:"Especialidad",field:"specialty",align:"left"}],columnsHorarios:[{name:"available_from",label:"Desde",field:"available_from",align:"left"},{name:"available_to",label:"Hasta",field:"available_to",align:"left"},{name:"days",label:"Días",field:"days",align:"left"},{name:"price",label:"Precio",field:"price",align:"right"},{name:"actions",label:"Acciones",align:"center"}]}},mounted(){this.doctoresGet()},methods:{doctoresGet(){this.loading=!0,this.$axios.get("doctors").then(r=>{this.doctores=r.data}).catch(r=>{this.$alert.error(r.response?.data?.message||"Error al obtener doctores")}).finally(()=>this.loading=!1)},doctorNuevo(){this.doctor={name:"",specialty:"",schedules:[]},this.dialogDoctor=!0},doctorEditar(r){this.doctor={...r},this.dialogDoctor=!0},doctorGuardar(){this.loading=!0,this.$axios.post("doctors",this.doctor).then(()=>{this.dialogDoctor=!1,this.$alert.success("Doctor creado"),this.doctoresGet()}).catch(r=>{this.$alert.error(r.response.data.message)}).finally(()=>this.loading=!1)},doctorActualizar(){this.loading=!0,this.$axios.put(`doctors/${this.doctor.id}`,this.doctor).then(()=>{this.dialogDoctor=!1,this.$alert.success("Doctor actualizado"),this.doctoresGet()}).catch(r=>{this.$alert.error(r.response.data.message)}).finally(()=>this.loading=!1)},doctorEliminar(r){this.$alert.dialog("¿Deseas eliminar este doctor?").onOk(()=>{this.loading=!0,this.$axios.delete(`doctors/${r}`).then(()=>{this.$alert.success("Doctor eliminado"),this.doctoresGet()}).catch(o=>{this.$alert.error(o.response.data.message)}).finally(()=>this.loading=!1)})},horariosGestionar(r){this.doctor={...r},this.horario={available_from:"",available_to:"",days:"",price:""},this.dialogHorarios=!0},guardarHorario(){this.loading=!0,this.$axios.post(`doctors/${this.doctor.id}/schedules`,this.horario).then(()=>{this.$alert.success("Horario guardado"),this.doctoresGet(),this.dialogHorarios=!1}).catch(r=>{this.$alert.error(r.response.data.message)}).finally(()=>this.loading=!1)},eliminarHorario(r){this.loading=!0,this.$axios.delete(`doctor-schedules/${r}`).then(()=>{this.$alert.success("Horario eliminado"),this.doctoresGet(),this.dialogHorarios=!1}).catch(o=>{this.$alert.error(o.response.data.message)}).finally(()=>this.loading=!1)}}},U={class:"text-h6"},B={class:"text-right"},S={class:"text-h6"},z={class:"row q-col-gutter-sm"},A={class:"col-4"},I={class:"col-4"},P={class:"col-4"},T={class:"col-4"},L={class:"col-8 flex items-center justify-end"};function O(r,o,j,F,a,s){return m(),u(E,{class:"q-pa-md"},{default:t(()=>[e(C,{rows:a.doctores,columns:a.columns,title:"Doctores",dense:"",flat:"",bordered:"","wrap-cells":"",filter:a.filter,"rows-per-page-options":[0]},{"top-right":t(()=>[e(d,{label:"Nuevo",icon:"add_circle_outline",color:"positive",onClick:s.doctorNuevo,class:"q-mr-sm",loading:a.loading,"no-caps":""},null,8,["onClick","loading"]),e(d,{label:"Actualizar",icon:"refresh",color:"primary",onClick:s.doctoresGet,loading:a.loading,"no-caps":""},null,8,["onClick","loading"]),e(n,{modelValue:a.filter,"onUpdate:modelValue":o[0]||(o[0]=l=>a.filter=l),label:"Buscar",dense:"",outlined:""},{append:t(()=>[e(f,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":t(l=>[e(k,{props:l},{default:t(()=>[e(G,{label:"Opciones",dense:"","no-caps":"",color:"primary",size:"10px"},{default:t(()=>[e(H,null,{default:t(()=>[g((m(),u(v,{clickable:"",onClick:h=>s.doctorEditar(l.row)},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(f,{name:"edit"})]),_:1}),e(c,null,{default:t(()=>[e(_,null,{default:t(()=>o[13]||(o[13]=[b("Editar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[y]]),g((m(),u(v,{clickable:"",onClick:h=>s.horariosGestionar(l.row)},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(f,{name:"event"})]),_:1}),e(c,null,{default:t(()=>[e(_,null,{default:t(()=>o[14]||(o[14]=[b("Horarios")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[y]]),g((m(),u(v,{clickable:"",onClick:h=>s.doctorEliminar(l.row.id)},{default:t(()=>[e(c,{avatar:""},{default:t(()=>[e(f,{name:"delete"})]),_:1}),e(c,null,{default:t(()=>[e(_,null,{default:t(()=>o[15]||(o[15]=[b("Eliminar")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[y]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),e(V,{modelValue:a.dialogDoctor,"onUpdate:modelValue":o[5]||(o[5]=l=>a.dialogDoctor=l),persistent:""},{default:t(()=>[e(D,{style:{width:"400px"}},{default:t(()=>[e(p,null,{default:t(()=>[i("div",U,Q(a.doctor.id?"Editar":"Nuevo")+" Doctor",1)]),_:1}),e(p,null,{default:t(()=>[e(w,{onSubmit:o[4]||(o[4]=l=>a.doctor.id?s.doctorActualizar():s.doctorGuardar())},{default:t(()=>[e(n,{modelValue:a.doctor.name,"onUpdate:modelValue":o[1]||(o[1]=l=>a.doctor.name=l),label:"Nombre",dense:"",outlined:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"]),e(n,{modelValue:a.doctor.specialty,"onUpdate:modelValue":o[2]||(o[2]=l=>a.doctor.specialty=l),label:"Especialidad",dense:"",outlined:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"]),i("div",B,[e(d,{label:"Cancelar",color:"negative",onClick:o[3]||(o[3]=l=>a.dialogDoctor=!1),"no-caps":""}),e(d,{label:"Guardar",color:"primary",type:"submit",class:"q-ml-sm","no-caps":"",loading:a.loading},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(V,{modelValue:a.dialogHorarios,"onUpdate:modelValue":o[12]||(o[12]=l=>a.dialogHorarios=l),persistent:""},{default:t(()=>[e(D,{style:{width:"600px","max-width":"90vw"}},{default:t(()=>[e(p,{class:"row items-center q-pb-none"},{default:t(()=>[i("div",S,"Horarios - "+Q(a.doctor.name),1),e(q),e(d,{icon:"close",flat:"",round:"",dense:"",onClick:o[6]||(o[6]=l=>a.dialogHorarios=!1)})]),_:1}),e(p,null,{default:t(()=>[e(w,{onSubmit:o[11]||(o[11]=l=>s.guardarHorario())},{default:t(()=>[i("div",z,[i("div",A,[e(n,{modelValue:a.horario.available_from,"onUpdate:modelValue":o[7]||(o[7]=l=>a.horario.available_from=l),label:"Desde",type:"time",dense:"",outlined:"",required:""},null,8,["modelValue"])]),i("div",I,[e(n,{modelValue:a.horario.available_to,"onUpdate:modelValue":o[8]||(o[8]=l=>a.horario.available_to=l),label:"Hasta",type:"time",dense:"",outlined:"",required:""},null,8,["modelValue"])]),i("div",P,[e(n,{modelValue:a.horario.days,"onUpdate:modelValue":o[9]||(o[9]=l=>a.horario.days=l),label:"Días",dense:"",outlined:"",required:""},null,8,["modelValue"])]),i("div",T,[e(n,{modelValue:a.horario.price,"onUpdate:modelValue":o[10]||(o[10]=l=>a.horario.price=l),modelModifiers:{number:!0},label:"Precio (Bs)",type:"number",dense:"",outlined:"",required:""},null,8,["modelValue"])]),i("div",L,[e(d,{color:"primary",label:"Guardar horario",icon:"add",type:"submit",dense:"","no-caps":""})])])]),_:1}),e(C,{rows:a.doctor.schedules||[],columns:a.columnsHorarios,dense:"",flat:"",bordered:"","row-key":"id",class:"q-mt-md"},{"body-cell-actions":t(l=>[e(k,{props:l},{default:t(()=>[e(d,{icon:"delete",color:"negative",dense:"",flat:"",round:"",onClick:h=>s.eliminarHorario(l.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const ee=x(N,[["render",O]]);export{ee as default};
