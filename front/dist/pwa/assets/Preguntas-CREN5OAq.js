import{_ as h,c as f,o as v,w as o,a,b as d,t as p,aj as c,f as n,a7 as u,d as b,h as V,Q as w,e as m,Z as y,ak as x}from"./index-DZp4gV5i.js";import{Q,a as g}from"./QTable-BadIApWu.js";import{Q as k}from"./QForm-DOVy_xNm.js";import{Q as C}from"./QPage-C6ggyl2Y.js";import"./format-Dat7aux2.js";import"./selection-D4fQrWpJ.js";import"./use-fullscreen-CDKR0VvK.js";const P={name:"PreguntasPage",data(){return{preguntas:[],pregunta:{},filter:"",loading:!1,preguntaDialog:!1,columns:[{name:"actions",label:"Acciones",field:"actions",align:"center"},{name:"pregunta",label:"Pregunta",field:"pregunta",align:"left"},{name:"respuesta",label:"Respuesta",field:"respuesta",align:"left"},{name:"precio",label:"Precio",field:"precio",align:"right"},{name:"activo",label:"Activo",field:"activo",align:"center"}]}},mounted(){this.preguntasGet()},methods:{preguntasGet(){this.loading=!0,this.$axios.get("preguntas").then(l=>{this.preguntas=l.data}).catch(l=>{this.$alert.error(l.response.data.message||"Error al obtener preguntas")}).finally(()=>{this.loading=!1})},preguntaNueva(){this.pregunta={pregunta:"",respuesta:"",activo:1,precio:""},this.preguntaDialog=!0},preguntaEditar(l){this.pregunta={...l},this.preguntaDialog=!0},preguntaGuardar(){this.loading=!0,this.pregunta.id?this.$axios.put(`preguntas/${this.pregunta.id}`,this.pregunta).then(()=>{this.$alert.success("Pregunta actualizada"),this.preguntaDialog=!1,this.preguntasGet()}).catch(l=>{this.$alert.error(l.response.data.message||"Error al actualizar")}):this.$axios.post("preguntas",this.pregunta).then(()=>{this.$alert.success("Pregunta creada"),this.preguntaDialog=!1,this.preguntasGet()}).catch(l=>{this.$alert.error(l.response.data.message||"Error al crear")})},preguntaEliminar(l){this.$alert.dialog("Â¿Eliminar esta pregunta?").onOk(()=>{this.loading=!0,this.$axios.delete(`preguntas/${l}`).then(()=>{this.$alert.success("Pregunta eliminada"),this.preguntasGet()}).catch(r=>{this.$alert.error(r.response.data.message||"Error al eliminar")})})},toggleActivo(l){this.loading=!0,this.$axios.put(`preguntas/${l.id}`,{...l}).then(()=>{this.$alert.success("Estado actualizado")}).catch(r=>{this.$alert.error("Error al actualizar estado"),l.activo=!l.activo}).finally(()=>{this.loading=!1})}}},_={style:{width:"250px","white-space":"normal","word-wrap":"break-word","line-height":"0.9"}},E={style:{width:"250px","white-space":"normal","word-wrap":"break-word","line-height":"0.9"}},D={class:"text-right q-mt-md"};function q(l,r,G,U,t,s){return v(),f(C,{class:"q-pa-md"},{default:o(()=>[a(Q,{rows:t.preguntas,columns:t.columns,dense:"",flat:"",bordered:"",title:"Preguntas y Respuestas",filter:t.filter,"rows-per-page-options":[0]},{"top-right":o(()=>[a(n,{label:"Nueva",icon:"add",color:"green",onClick:s.preguntaNueva,class:"q-mr-sm"},null,8,["onClick"]),a(n,{label:"Actualizar",icon:"refresh",onClick:s.preguntasGet,color:"secondary"},null,8,["onClick"]),a(u,{dense:"",outlined:"",modelValue:t.filter,"onUpdate:modelValue":r[0]||(r[0]=e=>t.filter=e),label:"Buscar",class:"q-ml-sm"},{append:o(()=>[a(b,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":o(e=>[a(g,{props:e},{default:o(()=>[a(n,{dense:"",flat:"",icon:"edit",color:"primary",onClick:i=>s.preguntaEditar(e.row),loading:t.loading},null,8,["onClick","loading"]),a(n,{dense:"",flat:"",icon:"delete",color:"negative",onClick:i=>s.preguntaEliminar(e.row.id),loading:t.loading},null,8,["onClick","loading"])]),_:2},1032,["props"])]),"body-cell-activo":o(e=>[a(g,{props:e},{default:o(()=>[a(c,{modelValue:e.row.activo,"onUpdate:modelValue":[i=>e.row.activo=i,i=>s.toggleActivo(e.row)],color:"green","false-value":0,"true-value":1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-pregunta":o(e=>[a(g,{props:e},{default:o(()=>[d("div",_,p(e.row.pregunta),1)]),_:2},1032,["props"])]),"body-cell-respuesta":o(e=>[a(g,{props:e},{default:o(()=>[d("div",E,p(e.row.respuesta),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),a(V,{modelValue:t.preguntaDialog,"onUpdate:modelValue":r[6]||(r[6]=e=>t.preguntaDialog=e)},{default:o(()=>[a(w,{style:{"min-width":"400px"}},{default:o(()=>[a(m,{class:"text-h6"},{default:o(()=>[y(p(t.pregunta.id?"Editar":"Nueva")+" Pregunta",1)]),_:1}),a(x),a(m,null,{default:o(()=>[a(k,{onSubmit:s.preguntaGuardar},{default:o(()=>[a(u,{modelValue:t.pregunta.pregunta,"onUpdate:modelValue":r[1]||(r[1]=e=>t.pregunta.pregunta=e),label:"Pregunta",dense:"",outlined:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"]),a(u,{modelValue:t.pregunta.respuesta,"onUpdate:modelValue":r[2]||(r[2]=e=>t.pregunta.respuesta=e),label:"Respuesta",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"]),a(c,{modelValue:t.pregunta.activo,"onUpdate:modelValue":r[3]||(r[3]=e=>t.pregunta.activo=e),label:"Activa","false-value":0,"true-value":1,color:"green",class:"q-mt-md"},null,8,["modelValue"]),a(u,{modelValue:t.pregunta.precio,"onUpdate:modelValue":r[4]||(r[4]=e=>t.pregunta.precio=e),label:"Precio",type:"number",dense:"",outlined:"",rules:[e=>!!e||"Campo requerido"],class:"q-mt-md"},null,8,["modelValue","rules"]),d("div",D,[a(n,{label:"Cancelar",flat:"",onClick:r[5]||(r[5]=e=>t.preguntaDialog=!1),color:"negative",loading:t.loading},null,8,["loading"]),a(n,{label:"Guardar",color:"primary",type:"submit",class:"q-ml-sm",loading:t.loading},null,8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const I=h(P,[["render",q]]);export{I as default};
