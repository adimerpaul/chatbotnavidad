import{j as f,k as m,l as h,al as _,_ as x,c as i,o as s,w as a,a as o,f as c,Z as C,t as v,a7 as w,d as k}from"./index-BauECx7o.js";import{Q as q,a as g}from"./QTable-BirSJN0S.js";import{Q as y}from"./QPage-BXv6I5md.js";import"./format-g9Qr7zkK.js";import"./selection-R2GtEYNB.js";import"./use-fullscreen-CjAxtF11.js";const Q=["top","middle","bottom"],p=f({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Q.includes(e)}},setup(e,{slots:l}){const u=m(()=>e.align!==void 0?{verticalAlign:e.align}:null),d=m(()=>{const t=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(t!==void 0?` text-${t}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>h("div",{class:d.value,style:u.value,role:"status","aria-label":e.label},_(l.default,e.label!==void 0?[e.label]:[]))}}),B={name:"AtencionClientePage",data(){return{numeros:[],filter:"",columns:[{name:"phone",label:"Teléfono",field:"phone",align:"left"},{name:"en_atencion",label:"En Atención",field:"en_atencion",align:"center"},{name:"acciones",label:"Acciones",field:"acciones",align:"center"}]}},mounted(){this.obtenerNumeros()},methods:{obtenerNumeros(){this.$axios.get("/atencion-clientes/number").then(e=>{this.numeros=e.data}).catch(()=>{this.$alert.error("Error al cargar los números")})},agregar(e){this.$axios.post("/atencion-manual",{phone:e,hora_atencion:new Date().toISOString().slice(0,19).replace("T"," ")}).then(()=>{this.$alert.success("Agregado a atención manual"),this.obtenerNumeros()}).catch(()=>{this.$alert.error("Error al agregar")})},quitar(e){this.$axios.delete(`/atencion-manual/${e}`).then(()=>{this.$alert.success("Quitado de atención manual"),this.obtenerNumeros()}).catch(()=>{this.$alert.error("Error al quitar")})}}};function $(e,l,u,d,t,r){return s(),i(y,{class:"q-pa-md"},{default:a(()=>[o(q,{rows:t.numeros,columns:t.columns,"row-key":"phone",flat:"",bordered:"",dense:"",title:"Atención al Cliente",filter:t.filter,"rows-per-page-options":[0]},{"top-right":a(()=>[o(c,{label:"Actualizar",icon:"refresh",onClick:r.obtenerNumeros,color:"primary",class:"q-mr-sm"},null,8,["onClick"]),o(w,{outlined:"",dense:"",modelValue:t.filter,"onUpdate:modelValue":l[0]||(l[0]=n=>t.filter=n),label:"Buscar",class:"q-ml-sm"},{append:a(()=>[o(k,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-en_atencion":a(n=>[o(g,{props:n},{default:a(()=>[o(p,{color:n.row.en_atencion?"green":"grey",align:"middle"},{default:a(()=>[C(v(n.row.en_atencion?"Sí":"No"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-acciones":a(n=>[o(g,{props:n},{default:a(()=>[n.row.en_atencion?(s(),i(c,{key:1,label:"Quitar",icon:"person_remove",color:"negative",dense:"",onClick:b=>r.quitar(n.row.phone)},null,8,["onClick"])):(s(),i(c,{key:0,label:"Atender",icon:"person_add",color:"primary",dense:"",onClick:b=>r.agregar(n.row.phone)},null,8,["onClick"]))]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])]),_:1})}const I=x(B,[["render",$]]);export{I as default};
